{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '47502659-8e710eb0ff3e952458316b5b2';\nconst BASE_URL = 'https://pixabay.com/api/';\nconst PER_PAGE = 15;\n\nexport async function fetchImages(query, page = 1, perPage = 15) {\n  try {\n    const response = await axios.get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: query,\n        page: page,\n        per_page: PER_PAGE,\n        per_page: perPage,\n        image_type: 'photo',\n        orientation: 'horizontal',\n      },\n    });\n    return response.data;\n  } catch (error) {\n    console.error('Ошибка запроса:', error);\n    throw error;\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport function renderGallery(images) {\n  const gallery = document.querySelector('.gallery');\n  const markup = images\n    .map(\n      (image) => `\n      <div class=\"photo-card\">\n        <a href=\"${image.largeImageURL}\" class=\"gallery-item\">\n          <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" />\n        </a>\n        <div class=\"info\">\n          <p class=\"info-item\"><b>Likes</b> ${image.likes}</p>\n          <p class=\"info-item\"><b>Views</b> ${image.views}</p>\n          <p class=\"info-item\"><b>Comments</b> ${image.comments}</p>\n          <p class=\"info-item\"><b>Downloads</b> ${image.downloads}</p>\n        </div>\n      </div>`\n    )\n    .join('');\n  gallery.insertAdjacentHTML('beforeend', markup);\n\n\n  const lightbox = new SimpleLightbox('.gallery a', {\n    captions: true,\n    captionSelector: 'img',\n    captionType: 'alt',\n    captionDelay: 250,\n    overlay: true,\n    stopPropagation: true,\n  });\n}\n\nexport function hideLoadMoreButton() {\n  const loadMoreButton = document.querySelector('.load-more');\n  if (loadMoreButton) {\n    loadMoreButton.style.display = 'none';\n  }\n}\n\nexport function showLoadMoreButton() {\n  const loadMoreButton = document.querySelector('.load-more');\n  if (loadMoreButton) {\n    loadMoreButton.style.display = 'block';\n  }\n}\n","import { fetchImages } from './js/pixabay-api';\nimport { renderGallery, showLoadMoreButton, hideLoadMoreButton } from './js/render-functions';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\niziToast.settings({\n  theme: 'dark',\n  position: 'topRight',\n  transitionIn: 'flipInX',\n  transitionOut: 'flipOutX',\n});\n\nlet query = '';\nlet page = 1;\n\nconst searchForm = document.querySelector('#search-form');\nconst loadMoreButton = document.querySelector('.load-more');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.createElement('span');\nloader.classList.add('loader');\n\nsearchForm.addEventListener('submit', onSearchSubmit);\nloadMoreButton.addEventListener('click', onLoadMoreClick);\n\nasync function onSearchSubmit(e) {\n  e.preventDefault();\n\n  query = e.target.elements.query.value.trim();\n  if (!query) return;\n\n  page = 1;\n  gallery.innerHTML = ''; // Удаляем старые изображения при новом поиске\n  hideLoadMoreButton();\n  document.body.appendChild(loader); // Показываем индикатор загрузки\n\n  try {\n    const data = await fetchImages(query, page);\n    document.body.removeChild(loader); // Убираем индикатор загрузки\n    if (data.hits.length === 0) {\n      iziToast.info({ title: 'Нет результатов', message: 'Попробуйте другой запрос' });\n      return;\n    }\n    renderGallery(data.hits);\n    if (data.totalHits > page * 15) showLoadMoreButton(); // Показываем кнопку, если есть больше страниц\n  } catch (error) {\n    console.error('Ошибка:', error); // Логирование для разработчиков\n    iziToast.error({\n      title: 'Ошибка',\n      message: 'Не удалось выполнить поиск изображений. Попробуйте позже.',\n    }); // Уведомление для пользователей\n    document.body.removeChild(loader); // Убираем индикатор загрузки\n  }\n}\n\nasync function onLoadMoreClick() {\n  page += 1;\n  document.body.appendChild(loader); // Показываем индикатор загрузки\n\n  try {\n    const data = await fetchImages(query, page);\n    document.body.removeChild(loader); // Убираем индикатор загрузки\n    renderGallery(data.hits);\n    if (page * 15 >= data.totalHits) {\n      hideLoadMoreButton();\n      iziToast.info({ title: 'Конец результатов', message: 'Больше изображений нет' });\n    }\n  } catch (error) {\n    console.error('Ошибка:', error); // Логирование для разработчиков\n    iziToast.error({\n      title: 'Ошибка',\n      message: 'Не удалось загрузить дополнительные изображения. Попробуйте позже.',\n    }); // Уведомление для пользователей\n    document.body.removeChild(loader); // Убираем индикатор загрузки\n  }\n}\n"],"names":["API_KEY","BASE_URL","PER_PAGE","fetchImages","query","page","perPage","axios","error","renderGallery","images","gallery","markup","image","SimpleLightbox","hideLoadMoreButton","loadMoreButton","showLoadMoreButton","iziToast","searchForm","loader","onSearchSubmit","onLoadMoreClick","data"],"mappings":"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"}