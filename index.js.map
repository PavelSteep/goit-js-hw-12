{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '47502659-8e710eb0ff3e952458316b5b2';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page = 1, perPage = 15) {\n  try {\n    const response = await axios.get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: query,\n        page: page,\n        per_page: perPage,\n        image_type: 'photo',\n        orientation: 'horizontal',\n      },\n    });\n    return response.data;\n  } catch (error) {\n    console.error('Ошибка запроса:', error);\n  }\n}\n","export function renderGallery(images) {\n  const gallery = document.querySelector('.gallery');\n  const markup = images\n    .map(\n      (image) => `\n      <div class=\"photo-card\">\n        <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" />\n        <div class=\"info\">\n          <p class=\"info-item\"><b>Likes</b> ${image.likes}</p>\n          <p class=\"info-item\"><b>Views</b> ${image.views}</p>\n          <p class=\"info-item\"><b>Comments</b> ${image.comments}</p>\n          <p class=\"info-item\"><b>Downloads</b> ${image.downloads}</p>\n        </div>\n      </div>`\n    )\n    .join('');\n  gallery.insertAdjacentHTML('beforeend', markup);\n}\n\nexport function showLoadMoreButton() {\n  const loadMoreButton = document.querySelector('.load-more');\n  loadMoreButton.classList.remove('hidden');\n}\n\nexport function hideLoadMoreButton() {\n  const loadMoreButton = document.querySelector('.load-more');\n  loadMoreButton.classList.add('hidden');\n}\n","import { fetchImages } from './js/pixabay-api';\nimport { renderGallery, showLoadMoreButton, hideLoadMoreButton } from './js/render-functions';\n\nlet query = '';\nlet page = 1;\n\nconst searchForm = document.querySelector('#search-form');\nconst loadMoreButton = document.querySelector('.load-more');\n\nsearchForm.addEventListener('submit', onSearchSubmit);\nloadMoreButton.addEventListener('click', onLoadMoreClick);\n\nasync function onSearchSubmit(e) {\n  e.preventDefault();\n\n  query = e.target.elements.query.value.trim();\n  if (!query) return;\n\n  page = 1;\n  hideLoadMoreButton();\n  const data = await fetchImages(query, page);\n  renderGallery(data.hits);\n  if (data.hits.length > 0) showLoadMoreButton();\n}\n\nasync function onLoadMoreClick() {\n  page += 1;\n  const data = await fetchImages(query, page);\n  renderGallery(data.hits);\n  if (data.hits.length === 0 || page * 15 >= data.totalHits) {\n    hideLoadMoreButton();\n    alert(\"We're sorry, but you've reached the end of search results.\");\n  }\n}\n\nwindow.addEventListener('scroll', () => {\n  if (window.innerHeight + window.scrollY >= document.documentElement.scrollHeight - 100) {\n    onLoadMoreClick();\n  }\n});\n"],"names":["API_KEY","BASE_URL","fetchImages","query","page","perPage","axios","error","renderGallery","images","gallery","markup","image","showLoadMoreButton","hideLoadMoreButton","searchForm","loadMoreButton","onSearchSubmit","onLoadMoreClick","e","data"],"mappings":"svBAEA,MAAMA,EAAU,qCACVC,EAAW,2BAEV,eAAeC,EAAYC,EAAOC,EAAO,EAAGC,EAAU,GAAI,CAC/D,GAAI,CAWF,OAViB,MAAMC,EAAM,IAAIL,EAAU,CACzC,OAAQ,CACN,IAAKD,EACL,EAAGG,EACH,KAAMC,EACN,SAAUC,EACV,WAAY,QACZ,YAAa,YACd,CACP,CAAK,GACe,IACjB,OAAQE,EAAO,CACd,QAAQ,MAAM,kBAAmBA,CAAK,CACvC,CACH,CCrBO,SAASC,EAAcC,EAAQ,CACpC,MAAMC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAASF,EACZ,IACEG,GAAU;AAAA;AAAA,oBAEGA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA,8CAEZA,EAAM,KAAK;AAAA,8CACXA,EAAM,KAAK;AAAA,iDACRA,EAAM,QAAQ;AAAA,kDACbA,EAAM,SAAS;AAAA;AAAA,aAG5D,EACA,KAAK,EAAE,EACVF,EAAQ,mBAAmB,YAAaC,CAAM,CAChD,CAEO,SAASE,GAAqB,CACZ,SAAS,cAAc,YAAY,EAC3C,UAAU,OAAO,QAAQ,CAC1C,CAEO,SAASC,GAAqB,CACZ,SAAS,cAAc,YAAY,EAC3C,UAAU,IAAI,QAAQ,CACvC,CCxBA,IAAIX,EAAQ,GACRC,EAAO,EAEX,MAAMW,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAiB,SAAS,cAAc,YAAY,EAE1DD,EAAW,iBAAiB,SAAUE,CAAc,EACpDD,EAAe,iBAAiB,QAASE,CAAe,EAExD,eAAeD,EAAeE,EAAG,CAI/B,GAHAA,EAAE,eAAc,EAEhBhB,EAAQgB,EAAE,OAAO,SAAS,MAAM,MAAM,OAClC,CAAChB,EAAO,OAEZC,EAAO,EACPU,IACA,MAAMM,EAAO,MAAMlB,EAAYC,EAAOC,CAAI,EAC1CI,EAAcY,EAAK,IAAI,EACnBA,EAAK,KAAK,OAAS,GAAGP,EAAkB,CAC9C,CAEA,eAAeK,GAAkB,CAC/Bd,GAAQ,EACR,MAAMgB,EAAO,MAAMlB,EAAYC,EAAOC,CAAI,EAC1CI,EAAcY,EAAK,IAAI,GACnBA,EAAK,KAAK,SAAW,GAAKhB,EAAO,IAAMgB,EAAK,aAC9CN,IACA,MAAM,4DAA4D,EAEtE,CAEA,OAAO,iBAAiB,SAAU,IAAM,CAClC,OAAO,YAAc,OAAO,SAAW,SAAS,gBAAgB,aAAe,KACjFI,GAEJ,CAAC"}