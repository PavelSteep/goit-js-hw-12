{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '47502659-8e710eb0ff3e952458316b5b2';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page = 1, perPage = 15) {\n  try {\n    const response = await axios.get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: query,\n        page: page,\n        per_page: perPage,\n        image_type: 'photo',\n        orientation: 'horizontal',\n      },\n    });\n    return response.data;\n  } catch (error) {\n    console.error('Ошибка запроса:', error);\n  }\n}\n","// import SimpleLightbox from 'simplelightbox';\n// import 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport function renderGallery(images) {\n  const gallery = document.querySelector('.gallery');\n  const markup = images\n    .map(\n      (image) => `\n      <div class=\"photo-card\">\n        <a href=\"${image.largeImageURL}\" class=\"gallery-item\">\n          <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\" />\n        </a>\n        <div class=\"info\">\n          <p class=\"info-item\"><b>Likes</b> ${image.likes}</p>\n          <p class=\"info-item\"><b>Views</b> ${image.views}</p>\n          <p class=\"info-item\"><b>Comments</b> ${image.comments}</p>\n          <p class=\"info-item\"><b>Downloads</b> ${image.downloads}</p>\n        </div>\n      </div>`\n    )\n    .join('');\n  gallery.insertAdjacentHTML('beforeend', markup);\n\n  // Инициализация SimpleLightbox\n  const lightbox = new SimpleLightbox('.gallery a', {\n    captions: true,\n    captionSelector: 'img', // использование изображения в качестве подписи\n    captionType: 'alt', // использование атрибута alt для подписи\n    captionDelay: 250,\n    overlay: true, // затемнение фона\n    stopPropagation: true // отключение пассивных слушателей\n  });  \n}\n\n\nexport function hideLoadMoreButton() {\n  const loadMoreButton = document.querySelector('.load-more');\n  if (loadMoreButton) {\n    loadMoreButton.style.display = 'none';\n  }\n}\n\nexport function showLoadMoreButton() {\n  const loadMoreButton = document.querySelector('.load-more');\n  if (loadMoreButton) {\n    loadMoreButton.style.display = 'block';\n  }\n}\n","import { fetchImages } from './js/pixabay-api';\nimport { renderGallery, showLoadMoreButton, hideLoadMoreButton } from './js/render-functions';\nimport iziToast from 'izitoast';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport 'izitoast/dist/css/iziToast.min.css';\n\niziToast.settings({\n  theme: 'dark',\n  position: 'topRight',\n  transitionIn: 'flipInX',\n  transitionOut: 'flipOutX',\n});\n\nlet query = '';\nlet page = 1;\n\nconst searchForm = document.querySelector('#search-form');\nconst loadMoreButton = document.querySelector('.load-more');\n\nsearchForm.addEventListener('submit', onSearchSubmit);\nloadMoreButton.addEventListener('click', onLoadMoreClick);\n\nasync function onSearchSubmit(e) {\n  e.preventDefault();\n\n  query = e.target.elements.query.value.trim();\n  if (!query) return;\n\n  page = 1;\n  hideLoadMoreButton();\n  const data = await fetchImages(query, page);\n  renderGallery(data.hits);\n  if (data.hits.length > 0) showLoadMoreButton();\n}\n\n\nasync function onLoadMoreClick() {\n  page += 1;\n  const data = await fetchImages(query, page);\n  renderGallery(data.hits);\n  if (data.hits.length === 0 || page * 15 >= data.totalHits) {\n    hideLoadMoreButton();\n    alert(\"We're sorry, but you've reached the end of search results.\");\n  }\n}\n\nwindow.addEventListener('scroll', () => {\n  if (window.innerHeight + window.scrollY >= document.documentElement.scrollHeight - 100) {\n    onLoadMoreClick();\n  }\n});\n"],"names":["API_KEY","BASE_URL","fetchImages","query","page","perPage","axios","error","renderGallery","images","gallery","markup","image","hideLoadMoreButton","loadMoreButton","showLoadMoreButton","iziToast","searchForm","onSearchSubmit","onLoadMoreClick","data"],"mappings":"6vBAEA,MAAMA,EAAU,qCACVC,EAAW,2BAEV,eAAeC,EAAYC,EAAOC,EAAO,EAAGC,EAAU,GAAI,CAC/D,GAAI,CAWF,OAViB,MAAMC,EAAM,IAAIL,EAAU,CACzC,OAAQ,CACN,IAAKD,EACL,EAAGG,EACH,KAAMC,EACN,SAAUC,EACV,WAAY,QACZ,YAAa,YACd,CACP,CAAK,GACe,IACjB,OAAQE,EAAO,CACd,QAAQ,MAAM,kBAAmBA,CAAK,CACvC,CACH,CClBO,SAASC,EAAcC,EAAQ,CACpC,MAAMC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAASF,EACZ,IACEG,GAAU;AAAA;AAAA,mBAEEA,EAAM,aAAa;AAAA,sBAChBA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA,8CAGdA,EAAM,KAAK;AAAA,8CACXA,EAAM,KAAK;AAAA,iDACRA,EAAM,QAAQ;AAAA,kDACbA,EAAM,SAAS;AAAA;AAAA,aAG5D,EACA,KAAK,EAAE,EACVF,EAAQ,mBAAmB,YAAaC,CAAM,EAG7B,IAAI,eAAe,aAAc,CAChD,SAAU,GACV,gBAAiB,MACjB,YAAa,MACb,aAAc,IACd,QAAS,GACT,gBAAiB,EACrB,CAAG,CACH,CAGO,SAASE,GAAqB,CACnC,MAAMC,EAAiB,SAAS,cAAc,YAAY,EACtDA,IACFA,EAAe,MAAM,QAAU,OAEnC,CAEO,SAASC,GAAqB,CACnC,MAAMD,EAAiB,SAAS,cAAc,YAAY,EACtDA,IACFA,EAAe,MAAM,QAAU,QAEnC,CCzCAE,EAAS,SAAS,CAChB,MAAO,OACP,SAAU,WACV,aAAc,UACd,cAAe,UACjB,CAAC,EAED,IAAIb,EAAQ,GACRC,EAAO,EAEX,MAAMa,EAAa,SAAS,cAAc,cAAc,EAClDH,EAAiB,SAAS,cAAc,YAAY,EAE1DG,EAAW,iBAAiB,SAAUC,CAAc,EACpDJ,EAAe,iBAAiB,QAASK,CAAe,EAExD,eAAeD,EAAe,EAAG,CAI/B,GAHA,EAAE,eAAc,EAEhBf,EAAQ,EAAE,OAAO,SAAS,MAAM,MAAM,OAClC,CAACA,EAAO,OAEZC,EAAO,EACPS,IACA,MAAMO,EAAO,MAAMlB,EAAYC,EAAOC,CAAI,EAC1CI,EAAcY,EAAK,IAAI,EACnBA,EAAK,KAAK,OAAS,GAAGL,EAAkB,CAC9C,CAGA,eAAeI,GAAkB,CAC/Bf,GAAQ,EACR,MAAMgB,EAAO,MAAMlB,EAAYC,EAAOC,CAAI,EAC1CI,EAAcY,EAAK,IAAI,GACnBA,EAAK,KAAK,SAAW,GAAKhB,EAAO,IAAMgB,EAAK,aAC9CP,IACA,MAAM,4DAA4D,EAEtE,CAEA,OAAO,iBAAiB,SAAU,IAAM,CAClC,OAAO,YAAc,OAAO,SAAW,SAAS,gBAAgB,aAAe,KACjFM,GAEJ,CAAC"}